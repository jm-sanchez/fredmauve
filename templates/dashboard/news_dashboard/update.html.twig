{% extends 'dashboard/index.html.twig' %}

{% block title %}Modification d'actualité{% endblock %}


{% block body %}
{% block pageTitle %}{% endblock %}
    {{ parent()}}
    <h1 class = "text-center mt-5">Modifier une actualité</h1>

    {{ form_start(form) }}
    <div class="d-flex flex-column align-items-center text-center">
        <div class="my-3 w-75">
        {{ form_row(form.title) }}
        </div>
        <div class="my-3 w-75">
        {{ form_row(form.description) }}
        </div>
        <div>
            {# S'il n'a pas d'image afficher l'input d'upload d'image #}
            {% if news.imageNews is empty %}
                <div>
                    <p>Ajouter une nouvelle image (facultatif) :</p>
                    {{ form_row(form.images) }}
                </div>
            {% else %}
                {# Sinon afficher l'image #}
                <p>Image :</p>
                <div class="d-inline-flex p-1 align-items-center">
                    <img class="img-fluid" src="{{ asset('assets/uploads/images/news/mini/300x300-' ~ news.imageNews.name) }}" alt="Image" width="100" height="100">
                    <a href="{{ path('admin_delete_image_news', {id: news.imageNews.id}) }}" data-delete data-token="{{ csrf_token('delete' ~ news.imageNews.id) }}">Supprimer</a>
                </div>
                {# Et cacher l'input d'upload d'image #}
                {% do form.images.setRendered() %}
            {% endif %}
        </div>

        <div class="my-3 w-75">
        {{ form_row(form.slug) }}
        </div>
        <div class="my-3 w-75">
            <button class="btn btn-primary">
                Modifier
            </button>
        </div>
        <form method="post" action="{{ path('admin_news_delete', {'id': news.id}) }}" onsubmit="return confirm('Voulez-vous vraiment supprimer cette actualité?');">
            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ news.id) }}">
            <button class="btn">Delete</button>
        </form>
        <a href="{{ path('admin_news_home') }}">Retour à la liste</a>
    </div>
    {{ form_end(form) }}
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('assets/js/images.js')}}" defer></script>
{% endblock %}